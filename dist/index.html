<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <!-- 页面的元信息 -->
    <title>测试预览页面</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=1000, user-scalable=yes"/>
    <meta name="format-detection" content="telephone=no, email=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="white"/>
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="filetype" content="1"/>
    <meta name="publishedtype" content="1"/>
    <meta name="pagetype" content="2"/>
    <meta name="description" content="{TAG_59447_TAG}"/>
    <meta name="keywords" content="{TAG_59446_TAG}"/>
    <meta name="catalogs" content="{TAG_83943_TAG}"/>
    
      <!-- 页面主样式文件 -->
      <link charset="utf-8"  rel="stylesheet" href="./static/css/owo.core.css">
      
    <!-- 附属css文件 -->
    <link rel="stylesheet" href="./static/css/main.css" charset="utf-8">
    <link rel="stylesheet" href="https://cunchu.site/work/login/standard.css" charset="utf-8">
      
  </head>
  <body>
    
    <!-- 页面[start]-->
    <div class="start page" template="start" style="display: none;"><div class="title-bar" step="1">
    <div class="content">
      <a target="_blank" href="http://www.people.com.cn/">
        <img width="80" height="30" alt="人民网" title="人民网" src="https://cunchu.site/upload/dbf7534a99f62fca.png">
      </a>
    </div>
    <div class="steep">
      <div class="item item-1" onclick="document.querySelector('.select-pannel').style.display = 'block';document.querySelector('.home .title-bar').setAttribute('step', 1);">
        <div class="index">1</div>
        <span>选择图表模板</span>
      </div>
      <img src="./static/images/line-2.png">
      <div class="item item-2">
        <div class="index">2</div>
        <span>图表配置</span>
      </div>
      <img src="./static/images/line-2.png">
      <div class="item item-3">
        <div class="index">3</div>
        <span>导出</span>
      </div>
    </div>
    <div class="back" onclick="document.querySelector('.select-pannel').style.display = 'block';document.querySelector('.home .title-bar').setAttribute('step', 1);">返回</div>
    <div class="dc-button" onclick="exportChart()">导出</div>
  </div><div class="title">网上群众工作部<br>在线数据编辑平台</div><div class="start-button" go="page">开始使用</div><div id="copyright">人 民 网 版 权 所 有 ，未 经 书 面 授 权 禁 止 使 用<br>Copyright © 1997-2021 by www.people.com.cn. all rights reserved</div></div>
    <!-- 页面[page]-->
    <div class="home clear page" template="page" style="display: none;"><div class="title-bar" step="1">
    <div class="content">
      <a target="_blank" href="http://www.people.com.cn/">
        <img width="80" height="30" alt="人民网" title="人民网" src="https://cunchu.site/upload/dbf7534a99f62fca.png">
      </a>
    </div>
    <div class="steep">
      <div class="item item-1" onclick="document.querySelector('.select-pannel').style.display = 'block';document.querySelector('.home .title-bar').setAttribute('step', 1);">
        <div class="index">1</div>
        <span>选择图表模板</span>
      </div>
      <img src="./static/images/line-2.png">
      <div class="item item-2">
        <div class="index">2</div>
        <span>图表配置</span>
      </div>
      <img src="./static/images/line-2.png">
      <div class="item item-3">
        <div class="index">3</div>
        <span>导出</span>
      </div>
    </div>
    <div class="back" onclick="document.querySelector('.select-pannel').style.display = 'block';document.querySelector('.home .title-bar').setAttribute('step', 1);">返回</div>
    <div class="dc-button" onclick="exportChart()">导出</div>
  </div><div class="owo fl left-panel"><div class="select-box"></div><h2>选择图表类型</h2><select id="dataType"><option value="funnel">漏斗图</option><option value="radar">雷达图</option><option value="line">折线图</option><option value="bar">柱状图</option><option value="scatter">散点图</option><option value="rose">玫瑰图</option><option value="pie">饼状图</option><option value="bar2">正负条形图</option><option value="category">极坐标柱状图</option></select><h2>选择颜色风格</h2><select id="dataType"><option value="[]">默认风格</option><option value="['#b0222e','#f0cb7a','#f9d895']">风格1</option></select><h2>导入数据</h2><div class="panel"><div class="mini-button" o-tap="down">下载图例</div><div class="mini-button"><span>导入数据</span><input id="fileUp" type="file"></div></div><textarea class="data-textbox"></textarea><h2>图表宽度</h2><input class="chart-width" type="number" value="600"><h2>图表高度</h2><input class="chart-height" type="number" value="600"><div class="owo button" o-tap="createdChart">生成图表</div></div><div class="fr"><div class="chart-box"><div id="chart"></div></div><div class="bottom-bar clear"><div class="owo owo-lable"></div></div></div><div class="select-pannel clear"><div class="item fl"><img src="./static/images/funnel.png" o-tap="selectItem('funnel', 'mockData2')"><p>漏斗图</p></div><div class="item fl"><img src="./static/images/radar.png" o-tap="selectItem('radar', 'mockData1')"><p>雷达图</p></div><div class="item fl"><img src="./static/images/line.png" o-tap="selectItem('line', 'mockData4')"><p>折线图</p></div><div class="item fl"><img src="./static/images/bar.png" o-tap="selectItem('bar', 'mockData4')"><p>柱状图</p></div><div class="item fl"><img src="./static/images/scatter.png" o-tap="selectItem('scatter', 'mockData3')"><p>散点图</p></div><div class="item fl"><img src="./static/images/rose.png" o-tap="selectItem('rose', 'mockData2')"><p>玫瑰图</p></div><div class="item fl"><img src="./static/images/pie.png" o-tap="selectItem('pie', 'mockData2')"><p>饼状图  </p></div><div class="item fl"><img src="./static/images/bar2.png" o-tap="selectItem('bar2', 'mockData5')"><p>正负条形图</p></div><div class="item fl"><img src="./static/images/category.png" o-tap="selectItem('category', 'mockData2')"><p>极坐标柱状图</p></div></div></div>
    
<!-- 框架script文件 -->
<script src="./static/js/owo.core.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
owo.script = {
  "start": {
    "template": {}
  },
  "page": {
    "data": {
      "myChart": null
    },
    "created": function created() {
      var input = document.querySelector('#fileUp');
      document.querySelector('.title-bar').setAttribute('step', 2);
      input.addEventListener('input', function () {
        var inputFile = input.files[0];

        if (inputFile) {
          var reader = new FileReader();
          var resultFile = input.files[0]; //获得本地的图片地址  放在reader.result内
          // 读取纯文本文件,且编码格式为 utf-8

          reader.readAsText(resultFile, 'UTF-8'); // 读取文件,会触发 onload 异步事件,可使用回调函数 来获取最终的值.

          reader.onload = function (e) {
            var fileContent = e.target.result;
            document.querySelector('.data-textbox').value = fileContent;
          };
        }
      });
    },
    "createdChart": function createdChart() {
      var fileData = document.querySelector('.data-textbox').value;
      var typeTemp = document.querySelector('#dataType').value;

      switch (typeTemp) {
        case 'radar':
          this.init(radarHandle(fileData));
          break;

        case 'funnel':
          this.init(funnelHandle(fileData));
          break;

        case 'line':
          this.init(lineHandle(fileData));
          break;

        case 'bar':
          this.init(barHandle(fileData));
          break;

        case 'scatter':
          this.init(scatterHandle(fileData));
          break;

        case 'rose':
          this.init(roseHandle(fileData));
          break;

        case 'pie':
          this.init(pieHandle(fileData));
          break;

        case 'bar2':
          this.init(bar2Handle(fileData));
          break;

        case 'category':
          this.init(categoryHandle(fileData));
          break;

        default:
          break;
      }
    },
    "down": function down() {
      var typeTemp = document.querySelector('#dataType').value;

      switch (typeTemp) {
        case 'radar':
          window.open('https://cunchu.site/mock/chart_csv/%E9%9B%B7%E8%BE%BE%E5%9B%BE.csv');
          break;

        case 'funnel':
          window.open('https://cunchu.site/mock/chart_csv/%E6%BC%8F%E6%96%97%E5%9B%BE.csv');
          break;

        default:
          break;
      }
    },
    "init": function init(option) {
      if (this.data.myChart) {
        this.data.myChart.dispose();
        this.data.myChart = null;
      }

      var chartDom = document.getElementById('chart');
      chartDom.style.width = document.querySelector('.chart-width').value + 'px';
      chartDom.style.height = document.querySelector('.chart-height').value + 'px';
      this.data.myChart = echarts.init(chartDom);
      option && this.data.myChart.setOption(option);
    },
    "selectItem": function selectItem(item, mockData) {
      var _this = this;

      document.querySelector('#dataType').value = item;
      document.querySelector('.select-pannel').style.display = 'none';
      document.querySelector('.data-textbox').value = window[mockData];
      setTimeout(function () {
        _this.createdChart();
      }, 0);
      document.querySelector('.home .title-bar').setAttribute('step', 2);
    },
    "template": {}
  }
};
</script>

    <script src="./static/js/main.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/echarts.min.js.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="https://cunchu.site/owo/script/tabIt.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="https://cunchu.site/work/login/standard.js" type="text/javascript"  charset="UTF-8"></script>

  </body>
</html>